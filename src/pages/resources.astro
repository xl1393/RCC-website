---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/sections/Footer.astro';
import Header from '../components/sections/Header.astro';
import { SITE_TITLE } from '../consts';
import { getEntry, render } from 'astro:content';

// Get resources page content from CMS
const resourcesPage = await getEntry('pages', 'resources');
const { Content } = await render(resourcesPage);
const { title: pageTitle, description: pageDescription, subtitle, sectionTitle, sectionDescription } = resourcesPage.data;
---

<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <BaseHead title={`${pageTitle} | ${SITE_TITLE}`} description={pageDescription} />
  </head>
  <body>
    <Header />
    <main class="max-w-6xl mx-auto px-4 py-12 md:py-20">
      <!-- Page Header -->
      <div class="text-center mb-16">
        <h1 class="text-4xl md:text-5xl font-bold text-foreground mb-4">
          {pageTitle}
        </h1>
        <p class="text-lg text-[color:var(--color-text-secondary)] max-w-3xl mx-auto">
          {pageDescription}
        </p>
      </div>

      <!-- Lambda Machines Section -->
      <div class="mb-16">
        <!-- Image and Description Side-by-Side on Desktop -->
        <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-center mb-12 max-w-4xl mx-auto">
          <!-- Image -->
          <div class="flex justify-center md:justify-start md:ml-24">
            <img
              src="/lambda-workstation.png"
              alt="Lambda Workstation"
              class="w-64 h-auto rounded-lg shadow-xl"
            />
          </div>

          <!-- Description -->
          <div class="text-center md:text-left">
            <h2 class="text-3xl md:text-4xl font-bold text-foreground mb-4">
              {sectionTitle}
            </h2>
            <p class="text-lg text-[color:var(--color-text-secondary)] leading-relaxed" set:html={sectionDescription} />
          </div>
        </div>

        <!-- Specifications Card -->
        <div class="card-surface p-8 rounded-xl max-w-4xl mx-auto">
          <div class="prose prose-lg max-w-none [&>h2]:text-2xl [&>h2]:font-semibold [&>h2]:text-foreground [&>h2]:mb-6 [&>h2]:text-center [&>h3]:text-sm [&>h3]:font-semibold [&>h3]:text-[color:var(--accent)] [&>h3]:uppercase [&>h3]:mb-1 [&>h3]:mt-4 [&>p]:text-[color:var(--color-text-primary)] [&>ul]:text-sm [&>ul]:text-[color:var(--color-text-muted)] [&>ul]:list-disc [&>ul]:list-inside [&>ul]:mt-1">
            <Content />
          </div>
        </div>
      </div>
    </main>
    <Footer />
  </body>
</html>
