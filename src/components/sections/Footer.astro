---
import contactIconRaw from "../../assets/icons/contact-icon.svg?raw";
import Button from "../ui/button/Button.astro";

function sanitizeToWhite(svg: string, size = 18) {
  let s = svg
    .replace(/<\?xml[\s\S]*?\?>/g, "")
    .replace(/<!--([\s\S]*?)-->/g, "")
    .replace(/width=\"[^\"]*\"/g, "")
    .replace(/height=\"[^\"]*\"/g, "")
    // Ensure shapes are visible: use white via currentColor on fill, drop strokes
    .replace(/fill=\"[^\"]*\"/gi, 'fill="currentColor"')
    .replace(/stroke=\"[^\"]*\"/gi, 'stroke="none"');
  s = s.replace(/<svg([^>]*)>/, (m, attrs) => `<svg${attrs} width="${size}" height="${size}">`);
  return s;
}

const contactIcon = sanitizeToWhite(contactIconRaw);
---

<footer id="contact" class="py-12 px-4 text-center">
  <h2 class="text-2xl md:text-3xl font-semibold text-foreground">Want to work with us?</h2>
  <p class="mt-2 text-[color:var(--color-text-muted)]">Let's build something together!</p>
    <div class="mt-6 flex justify-center">
    <Button href="/contact" variant="secondary" size="md" >
      <span class="inline-flex" aria-hidden="true" set:html={contactIcon} />
      Get in touch
    </Button>
  </div>

  <!-- Social Links -->
  <div class="mt-8 flex items-center justify-center gap-6">
    <a href="https://twitter.com/cunyrcc" target="_blank" rel="noopener noreferrer" class="group text-[color:var(--color-text-secondary)] hover:text-[color:var(--accent)] transition-colors" aria-label="Follow us on X (Twitter)">
      <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="transition-colors"><path fill="currentColor" d="M18.146 3H21l-7.5 8.574L22.5 21h-6.297l-4.93-5.597L5.5 21H3l8.106-9.266L3 3h6.453l4.466 5.07L18.146 3Zm-1.103 16.2h1.705L7.05 4.64H5.272l11.771 14.56Z"/></svg>
    </a>
    <a href="https://linkedin.com/company/cuny-rcc" target="_blank" rel="noopener noreferrer" class="group text-[color:var(--color-text-secondary)] hover:text-[color:var(--accent)] transition-colors" aria-label="Follow us on LinkedIn">
      <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="transition-colors"><path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
    </a>
  </div>

  <!-- Footer branding -->
  <div class="mt-10 pt-8 border-t border-[color:var(--color-border-light)]">
    <p class="text-xs font-semibold text-[color:var(--color-text-secondary)] mb-2">
      Bioinformatics AI Data Science
    </p>
    <p class="text-xs text-[color:var(--color-text-muted)]">
      © 2025 RCC CUNY • Centre of Bioinformatics & AI Research at CUNY
    </p>
  </div>
</footer>
