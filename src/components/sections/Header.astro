---
import { SITE_TITLE } from '../../consts';
import HeaderLink from './HeaderLink.astro';
import ThemeToggle from '../ui/button/ThemeToggle.astro';
---

<header class="bg-background text-foreground border-b sw-header">
    <nav class="mx-auto max-w-6xl px-4 py-2 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <a class="no-underline hover:opacity-90 flex items-center gap-4" href="/" aria-label="Home" style="align-items: flex-end;">
                <img src="/cuny-seeklogo.png" alt="CUNY logo" aria-hidden="true" width="44" height="44" style="z-index:2; position:relative; background:white; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.04); margin-left:-12px;" />
                <img src="/assets/logos/cuny_med.png" alt="CUNY Med logo" aria-hidden="true" width="110" height="110" style="margin-left:0; border-radius: 12px; background: white; box-shadow:0 2px 8px rgba(0,0,0,0.04); z-index:1; position:relative;" />
            </a>
            <div class="internal-links hidden md:flex items-center gap-2 ml-1">
                <HeaderLink href="/" class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline">Home</HeaderLink>
                <HeaderLink href="/about" class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline">About Us</HeaderLink>
                <HeaderLink href="/portfolio" class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline">Portfolio</HeaderLink>
                <HeaderLink href="/blog" class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline">Blog</HeaderLink>
                <HeaderLink href="/contact" class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline">Contact</HeaderLink>
            </div>
        </div>
        <div class="flex items-center gap-3">
            <div class="social-links hidden md:flex items-center gap-3">
                <a href="https://twitter.com/cunyrcc" target="_blank" rel="noopener noreferrer" class="group text-[color:var(--color-text-secondary)]">
                    <span class="sr-only">Follow us on X (Twitter)</span>
                    <!-- X icon -->
                    <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="transition-colors group-hover:text-[color:var(--accent)]"><path fill="currentColor" d="M18.146 3H21l-7.5 8.574L22.5 21h-6.297l-4.93-5.597L5.5 21H3l8.106-9.266L3 3h6.453l4.466 5.07L18.146 3Zm-1.103 16.2h1.705L7.05 4.64H5.272l11.771 14.56Z"/></svg>
                </a>
                <a href="https://linkedin.com/company/cuny-rcc" target="_blank" rel="noopener noreferrer" class="group text-[color:var(--color-text-secondary)]">
                    <span class="sr-only">Follow us on LinkedIn</span>
                    <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="transition-colors group-hover:text-[color:var(--accent)]"><path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
            </div>
            <ThemeToggle />
            <button type="button" aria-label="Open menu" aria-controls="mobile-menu" aria-expanded="false" data-menu-btn class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg text-[color:var(--color-text-secondary)] hover:text-white">
                <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill="currentColor" d="M3 6h18v2H3V6Zm0 5h18v2H3v-2Zm0 5h18v2H3v-2Z"/></svg>
            </button>
        </div>
    </nav>
    <div id="mobile-menu" class="md:hidden hidden border-t">
        <div class="mx-auto max-w-6xl px-4 py-3 flex flex-col gap-2">
            <div class="flex flex-col">
                <HeaderLink href="/" class="px-2 py-3">Resume</HeaderLink>
                <HeaderLink href="/portfolio" class="px-2 py-3">Portfolio</HeaderLink>
                <HeaderLink href="/about" class="px-2 py-3">About Us</HeaderLink>
                <HeaderLink href="/blog" class="px-2 py-3">Blog</HeaderLink>
                <HeaderLink href="/contact" class="px-2 py-3">Contact</HeaderLink>
            </div>
            <div class="flex items-center gap-4 pt-2">
                <a href="https://twitter.com/cunyrcc" target="_blank" rel="noopener noreferrer" class="group inline-flex items-center text-[color:var(--color-text-secondary)]">
                    <span class="sr-only">Follow us on X (Twitter)</span>
                    <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true" class="transition-colors group-hover:text-white"><path fill="currentColor" d="M18.146 3H21l-7.5 8.574L22.5 21h-6.297l-4.93-5.597L5.5 21H3l8.106-9.266L3 3h6.453l4.466 5.07L18.146 3Zm-1.103 16.2h1.705L7.05 4.64H5.272l11.771 14.56Z"/></svg>
                </a>
                <a href="https://linkedin.com/company/cuny-rcc" target="_blank" rel="noopener noreferrer" class="group inline-flex items-center text-[color:var(--color-text-secondary)]">
                    <span class="sr-only">Follow us on LinkedIn</span>
                    <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true" class="transition-colors group-hover:text-white"><path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
            </div>
        </div>
    </div>
</header>

<script is:inline>
  const btn = document.querySelector('[data-menu-btn]');
  const panel = document.getElementById('mobile-menu');
  function toggleMenu() {
    if (!panel || !btn) return;
    const isOpen = !panel.classList.contains('hidden');
    if (isOpen) {
      panel.classList.add('hidden');
      btn.setAttribute('aria-expanded', 'false');
    } else {
      panel.classList.remove('hidden');
      btn.setAttribute('aria-expanded', 'true');
    }
  }
  btn?.addEventListener('click', toggleMenu);
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') {
    if (!panel?.classList.contains('hidden')) toggleMenu();
  }});
  document.addEventListener('click', (e) => {
    if (!panel || !btn) return;
    const target = e.target;
    const clickedInside = panel.contains(target) || btn.contains(target);
    if (!clickedInside && !panel.classList.contains('hidden')) toggleMenu();
  });
</script>
